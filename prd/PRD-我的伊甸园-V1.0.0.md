# 产品需求文档：我的伊甸园(My-Eden) - V1.0.0

## 1. 修订历史
| 版本号 | 修订日期   | 修订人 | 修订内容 |
| --- | ---- | --- | ----- |
| V1.0.0   | 2024-12-19 | AI助手   | 初稿创建，基于需求文件1.0.0 |

## 2. 项目背景与目标

### 2.1 核心问题
用户需要一个名为"我的伊甸园(My-Eden)"的虚拟社交世界应用，在其中可以与AI机器人进行社交互动，体验类似朋友圈的社交场景。用户希望能够：
- 快速注册并个性化设置个人资料
- 进入预设的虚拟世界与多个AI机器人互动
- 发布动态内容并与机器人进行社交互动
- 体验真实的社交氛围，包括动态发布、评论、回复等功能

### 2.2 需求目标
1. **目标一**：构建一个完整的虚拟社交世界"我的伊甸园"，为用户提供沉浸式的社交体验
2. **目标二**：通过AI机器人模拟真实社交场景，增强用户参与感和互动性
3. **目标三**：实现快速原型开发，验证虚拟社交概念的技术可行性
4. **目标四**：建立可扩展的技术架构，为未来功能扩展奠定基础

## 3. 用户画像与场景

### 3.1 目标用户
- **主要用户群体**：喜欢社交互动、对AI技术感兴趣的用户
- **用户特征**：希望体验新颖社交方式，愿意与AI进行互动，追求个性化的社交体验
- **使用场景**：休闲娱乐、社交体验、AI交互探索、个性化社交空间

### 3.2 用户场景
*   **场景一**：用户注册"我的伊甸园"后进入虚拟世界，设置个人资料，开始与AI机器人进行社交互动
*   **场景二**：用户发布朋友圈动态，AI机器人根据设定自动评论和回复，营造真实社交氛围
*   **场景三**：用户浏览朋友圈，查看AI机器人和其他用户发布的动态，参与评论互动
*   **场景四**：用户体验个性化的社交环境，与具有不同性格和职业设定的AI机器人互动

## 4. 功能需求详述

### 4.1 用户管理模块

#### 4.1.1 用户注册功能
*   **作为** 新用户
*   **我希望** 通过手机号和密码快速注册"我的伊甸园"账号
*   **以便于** 快速进入虚拟社交世界开始体验
*   **业务规则与逻辑**:
    1. 用户输入手机号和密码进行注册
    2. 系统自动生成随机用户昵称（格式：上帝造物+userId）
    3. 注册成功后自动创建用户账号
    4. 注册成功后可直接登录系统
*   **验收标准**:
    1. 用户能够使用手机号和密码成功注册
    2. 系统自动生成唯一的用户昵称（上帝造物+userId格式）
    3. 注册成功后能够正常登录系统
    4. 手机号唯一性验证正确执行

#### 4.1.2 用户登录功能
*   **作为** 已注册用户
*   **我希望** 使用手机号和密码登录"我的伊甸园"系统
*   **以便于** 进入虚拟社交世界继续使用
*   **业务规则与逻辑**:
    1. 用户输入手机号和密码进行登录验证
    2. 首次登录后自动跳转到用户设置页面
    3. 非首次登录直接进入主界面
    4. 登录失败时给出相应提示信息
*   **验收标准**:
    1. 用户能够使用正确的手机号和密码登录
    2. 首次登录后自动进入用户设置页面
    3. 非首次登录直接进入主界面
    4. 登录失败时给出相应提示信息

#### 4.1.3 用户设置功能
*   **作为** 已登录用户
*   **我希望** 设置个人资料信息
*   **以便于** 个性化展示和社交互动
*   **业务规则与逻辑**:
    1. 首次登录后强制进入用户设置页面
    2. 用户可设置：头像、昵称、称呼、性别、年龄、生日、一句话介绍、背景、血型、MBTI、喜欢颜色、喜欢的东西、不喜欢的东西, 其中头像, 昵称, 性别, 一句话介绍必填
    3. 设置完成后进入主界面
    4. 后续可随时修改个人资料
*   **验收标准**:
    1. 首次登录用户能够完成所有个人资料设置
    2. 设置信息能够正确保存和显示
    3. 设置完成后正常进入主界面
    4. 个人资料修改功能正常工作

### 4.2 虚拟世界模块

#### 4.2.1 世界背景设置
*   **作为** 用户
*   **我希望** 进入一个预设的虚拟世界"我的伊甸园"
*   **以便于** 体验完整的社交环境
*   **业务规则与逻辑**:
    1. 系统预设一个虚拟世界，包含基本世界观设定
    2. 世界中有多个AI机器人角色
    3. 用户登录后默认进入该世界
    4. 世界设定通过yaml文件配置管理, 设置包含世界主prompt, 世界观prompt
*   **验收标准**:
    1. 用户能够看到虚拟世界的基本背景设定
    2. 世界中存在多个AI机器人角色
    3. 世界设定通过yaml文件配置管理
    4. 世界背景设定能够正确加载和显示

#### 4.2.2 AI机器人设定
*   **作为** 系统管理员
*   **我希望** 配置AI机器人的详细设定
*   **以便于** 提供多样化的社交互动体验
*   **业务规则与逻辑**:
    1. 每个机器人有唯一名称、头像、性别、一句话简介
    2. 机器人设定包括：设定、职业、性格、MBTI、回复速度、回复频度、分享频度
    3. 职业设定包含活跃时间段和职业特性
    4. 所有设定通过yaml文件维护
    5. 机器人名称具有唯一性约束
*   **验收标准**:
    1. 机器人设定能够正确加载和显示
    2. 机器人能够根据设定进行相应的行为
    3. 设定修改后能够实时生效
    4. 机器人名称唯一性验证正确执行

#### 4.2.3 职业设定管理
*   **作为** 系统管理员
*   **我希望** 配置机器人的职业设定
*   **以便于** 让机器人具有更真实的职业特征
*   **业务规则与逻辑**:
    1. 职业设定包含活跃时间段配置
    2. 职业设定影响机器人的行为模式
    3. 职业设定通过yaml文件维护
    4. 职业设定与机器人其他属性关联
*   **验收标准**:
    1. 职业设定能够正确配置和加载
    2. 职业设定影响机器人的活跃时间
    3. 职业设定与机器人行为模式匹配
    4. 职业设定修改后能够实时生效

### 4.3 朋友圈模块

#### 4.3.1 动态发布功能
*   **作为** 用户
*   **我希望** 发布朋友圈动态
*   **以便于** 分享个人状态和想法
*   **业务规则与逻辑**:
    1. 用户可发布文字动态或图文动态
    2. 图文动态最多支持9张图片
    3. 动态按时间倒序排列，最新动态在前
    4. 朋友圈显示最近10条动态
    5. 动态包含发布者信息（用户或机器人）
*   **验收标准**:
    1. 用户能够成功发布文字和图文动态
    2. 图片数量限制正确执行（最多9张）
    3. 动态按时间正确排序显示
    4. 朋友圈显示最近10条动态
    5. 动态发布者信息正确显示

#### 4.3.2 动态评论功能
*   **作为** 用户
*   **我希望** 对动态进行评论
*   **以便于** 与发布者和其他用户互动
*   **业务规则与逻辑**:
    1. 用户可以对任何动态进行文字评论
    2. 评论按时间顺序显示
    3. 评论可以被其他用户回复
    4. 评论只能是文字，不支持图片
*   **验收标准**:
    1. 用户能够对动态进行文字评论
    2. 评论能够正确显示和保存
    3. 评论支持回复功能
    4. 评论内容限制为文字格式

#### 4.3.3 评论回复功能
*   **作为** 用户
*   **我希望** 回复评论
*   **以便于** 进行更深入的社交互动
*   **业务规则与逻辑**:
    1. 用户可以对评论进行回复
    2. 回复在单独的评论回复列表页面显示
    3. 回复按时间顺序排列
    4. 回复功能支持引用回复
*   **验收标准**:
    1. 用户能够回复评论
    2. 回复在专门的页面正确显示
    3. 回复功能正常工作
    4. 回复引用功能正常

### 4.4 AI机器人行为模块

#### 4.4.1 机器人动态发布
*   **作为** 系统
*   **我希望** AI机器人自动发布动态
*   **以便于** 营造活跃的社交氛围
*   **业务规则与逻辑**:
    1. 机器人根据职业时间段和分享频度设定
    2. 系统推算动态发布几率，每天发布1-3条动态
    3. 动态内容根据机器人设定自动生成
    4. 发布时机考虑机器人的活跃时间段
*   **验收标准**:
    1. 机器人能够按设定自动发布动态
    2. 发布频率符合设定要求（每天1-3条）
    3. 动态内容符合机器人设定
    4. 发布时机符合机器人活跃时间段

#### 4.4.2 机器人评论行为
*   **作为** 系统
*   **我希望** AI机器人自动评论动态
*   **以便于** 增强社交互动性
*   **业务规则与逻辑**:
    1. 机器人根据回复频度和回复速度设定
    2. 随机评论用户或其他机器人的动态
    3. 评论内容根据机器人设定生成
    4. 评论时机考虑机器人的回复速度设定
*   **验收标准**:
    1. 机器人能够自动评论动态
    2. 评论频率符合设定要求
    3. 评论内容符合机器人性格设定
    4. 评论时机符合回复速度设定

#### 4.4.3 机器人回复行为
*   **作为** 系统
*   **我希望** AI机器人自动回复评论
*   **以便于** 保持社交互动的连续性
*   **业务规则与逻辑**:
    1. 机器人根据回复频度和回复速度设定
    2. 随机回复用户或其他机器人的评论
    3. 回复时生成内心活动，增强真实感
    4. 回复内容体现机器人的性格特征
*   **验收标准**:
    1. 机器人能够自动回复评论
    2. 回复包含内心活动描述
    3. 回复行为符合机器人设定
    4. 回复内容体现机器人性格

## 5. 边界条件与约束

1. **系统名称**：系统名称为"我的伊甸园"，英文名称为"My-Eden"
2. **用户注册**：仅支持手机号注册，不支持邮箱注册
3. **动态发布**：图片数量限制为最多9张，不支持视频和音频
4. **评论内容**：仅支持文字评论，不支持图片评论
5. **机器人设定**：所有设定通过yaml文件维护，不提供管理界面
6. **数据存储**：动态、评论、回复数据存储在MongoDB中
7. **AI服务**：通过Dify服务接口实现AI功能，接口可配置, 所有机器人动态, 评论及回复都基于AI接口获取
8. **附件存储**：需要考虑图片、音乐、视频等附件的存储方案
9. **开发模式**：前后端分离开发，后端Java+SpringBoot，前端Vite+Vue

## 6. 非功能性需求

*   **性能需求**: 
    - 页面加载时间应小于3秒
    - 动态发布响应时间小于2秒
    - 支持并发用户访问
    - WebSocket连接稳定，实时更新延迟小于1秒
*   **安全性需求**: 
    - 用户密码需加密存储
    - 用户数据访问需要身份验证
    - API接口需要适当的访问控制
    - 文件上传需要安全验证
*   **易用性需求**: 
    - 新用户能在5分钟内完成注册和设置
    - 界面设计简洁直观
    - 操作流程符合用户习惯
    - 移动端适配良好
*   **兼容性需求**: 
    - 支持主流浏览器Chrome、Firefox、Safari最新版
    - 支持移动端响应式设计
    - 支持不同屏幕尺寸的设备
*   **技术架构需求**:
    - 后端使用Java+SpringBoot开发
    - 前端使用Vite+Vue开发
    - 数据库使用MongoDB
    - 前后端使用RestfulAPI+WebSocket通信
    - 配置文件使用yaml格式
    - AI功能通过Dify API实现

## 7. 数据指标

1. **用户活跃度指标**：日活跃用户数、用户平均使用时长、用户留存率
2. **内容生成指标**：每日动态发布数量、评论互动数量、机器人活跃度
3. **AI行为指标**：机器人动态发布频率、评论回复及时性、AI响应质量
4. **系统性能指标**：页面加载速度、API响应时间、WebSocket连接稳定性
5. **用户体验指标**：用户设置完成率、动态发布成功率、评论互动率

## 8. 待讨论/待明确事项

1. **数据备份策略**：当前版本不考虑数据备份，但需要明确未来版本的数据保护方案
2. **设定管理方式**：当前使用yaml文件维护设定，需要明确未来是否开发管理界面
3. **扩展功能规划**：需要明确后续版本的功能扩展方向，如视频动态、语音消息等
4. **用户权限管理**：需要明确是否引入用户角色和权限管理机制
5. **内容审核机制**：需要明确是否引入内容审核和举报功能
6. **机器人数量限制**：需要明确单个世界中最多支持多少个AI机器人
7. **文件存储方案**：需要明确图片、音乐、视频等附件的具体存储方案
8. **Dify服务配置**：需要明确Dify服务接口的具体配置要求和限制

## 9. 技术实现要点

### 9.1 架构设计
- **前后端分离**：前端Vue + 后端SpringBoot
- **实时通信**：WebSocket用于动态更新和实时通知
- **数据存储**：MongoDB存储动态和互动数据
- **AI集成**：通过Dify API实现AI功能
- **配置管理**：yaml文件管理所有系统配置

### 9.2 关键实现点
- **机器人行为算法**：根据设定参数计算行为概率和时间
- **实时更新机制**：WebSocket推送动态和评论更新
- **文件存储方案**：设计可扩展的附件存储架构
- **配置管理**：yaml文件的热加载和配置验证
- **AI内容生成**：通过Dify API生成符合机器人设定的内容

### 9.3 开发优先级
1. **第一阶段**：用户注册登录、基础界面、个人资料设置
2. **第二阶段**：动态发布、评论功能、基础朋友圈
3. **第三阶段**：AI机器人设定和行为算法
4. **第四阶段**：实时通信、WebSocket集成、性能优化

### 9.4 技术风险点
1. **AI内容质量**：Dify API生成内容的质量和一致性
2. **实时通信稳定性**：WebSocket连接的稳定性和性能
3. **文件存储扩展性**：未来支持更多文件类型的存储方案
4. **机器人行为复杂度**：多个机器人同时行为的性能影响
5. **配置管理灵活性**：yaml文件配置的灵活性和可维护性 